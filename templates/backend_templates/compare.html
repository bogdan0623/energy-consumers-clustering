{% extends 'base.html' %}
{% block content %}
<html>
<head>
</head>
<br>
<br>

<body>
<div align="center">
    <div class="card"
         style="border: 1.2px solid #ccc; border-radius: 10px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); background-color: #fff; width: 725px; height: 600px; align: center;"
         align="center">
        <div class="card-header" align="center">
            <b>Comparison report</b>
        </div>
        <br>
        <br>
        <div class="card-content" style="font-size: 16px; padding-left: 26px; padding-right: 26px;">
            <div style="display: flex; align-items: center; padding: 20px;">
                <div>
                    <h4>Period 1</h4>
                    <br>
                    <label for="m1" style="margin-bottom: 10px; margin-left: 20px;">Month 1:</label>
                    <select id="m1" name="m1" style="margin-bottom: 10px; margin-left: 60px;">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <br>
                    <label for="y1" style="margin-bottom: 10px; margin-right: 40px;">Year 1:</label>
                    <select id="y1" name="y1" style="margin-bottom: 10px; margin-left: 18px;">
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                    </select>
                    <br>
                    <label for="m2" style="margin-bottom: 10px; margin-left: 20px;">Month 2:</label>
                    <select id="m2" name="m2" style="margin-bottom: 10px; margin-left: 60px;">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <br>
                    <label for="y2" style="margin-bottom: 10px; margin-right: 40px;">Year 2:</label>
                    <select id="y2" name="y2" style="margin-bottom: 10px; margin-left: 18px;">
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                    </select>
                </div>
                <div>
                    <h4 style="margin-bottom: 10px; margin-left: 110px;">Period 2</h4>
                    <br>
                    <label for="m3" style="margin-bottom: 10px; margin-left: 110px;">Month 1:</label>
                    <select id="m3" name="m3" style="margin-bottom: 10px; margin-left: 50px;">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <br>
                    <label for="y3" style="margin-bottom: 10px; margin-left: 88px;">Year 1:</label>
                    <select id="y3" name="y3" style="margin-bottom: 10px; margin-left: 50px;">
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                    </select>
                    <br>
                    <label for="m4" style="margin-bottom: 10px; margin-left: 110px;">Month 2:</label>
                    <select id="m4" name="m4" style="margin-bottom: 10px; margin-left: 50px;">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                        >December
                    </select>
                    <br>
                    <label for="y4" style="margin-bottom: 10px; margin-left: 88px;">Year 2:</label>
                    <select id="y4" name="y4" style="margin-bottom: 10px; margin-left: 50px;">
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                    </select>
                </div>

            </div>
            <br>
            <br>
            <div style="text-align: center;">
                <button class="btn btn-success rounded-pill" id="submitBtn">Show report</button>
                <br>
                <br>
                <div id="loadingMessage" style="display:none; font-size: 18px;">Loading...</div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var assignedPod = '{{assigned_pod}}';

</script>
<script>
document.getElementById("submitBtn").addEventListener("click", handleSubmission);

function handleSubmission() {
    const m1 = parseInt(document.getElementById("m1").value);
    const m2 = parseInt(document.getElementById("m2").value);
    const m3 = parseInt(document.getElementById("m3").value);
    const m4 = parseInt(document.getElementById("m4").value);
    const y1 = parseInt(document.getElementById("y1").value);
    const y2 = parseInt(document.getElementById("y2").value);
    const y3 = parseInt(document.getElementById("y3").value);
    const y4 = parseInt(document.getElementById("y4").value);
    var assignedPod = '{{assigned_pod}}';
    console.log(assignedPod);

    fetch('http://localhost:8000/compare/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}'
        },
        body: JSON.stringify({
                "pod": assignedPod,
                "m1": m1,
                "m2": m2,
                "m3": m3,
                "m4": m4,
                "y1": y1,
                "y2": y2,
                "y3": y3,
                "y4": y4
            })
    })
    .then(response => response.json())
    .then(data => {
        window.location.href = 'http://127.0.0.1:8000/comparison_reports/';
    })
    .catch(error => console.error('Error:', error));
}

</script>
</body>
</html>
{% endblock %}